<!--pages/children/children.wxml-->
<view class="container">
  <!-- 儿童列表 -->
  <view class="children-list">
    <view class="child-item" wx:for="{{childrenList}}" wx:key="id">
      <view class="child-info">
        <view class="child-header">
          <text class="child-name">{{item.name || '儿童' + (index + 1)}}</text>
          <view class="child-actions">
            <text class="edit-btn" bindtap="editChild" data-id="{{item.id}}">编辑</text>
            <text class="delete-btn" bindtap="deleteChild" data-id="{{item.id}}">删除</text>
          </view>
        </view>
        <view class="child-details">
          <view class="detail-item">
            <text class="label">性别：</text>
            <text class="value">{{item.gender}}</text>
          </view>
          <view class="detail-item">
            <text class="label">年龄：</text>
            <text class="value">{{item.age}}岁</text>
          </view>
          <view class="detail-item">
            <text class="label">身高：</text>
            <text class="value">{{item.height}}cm</text>
          </view>
          <view class="detail-item">
            <text class="label">监护人电话：</text>
            <text class="value">{{item.guardianPhone}}</text>
          </view>
          <view class="detail-item" wx:if="{{item.healthNote}}">
            <text class="label">健康备注：</text>
            <text class="value">{{item.healthNote}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 添加儿童按钮 -->
  <view class="add-child" bindtap="showAddChildModal">
    <text class="add-icon">+</text>
    <text>添加儿童信息</text>
  </view>

  <!-- 添加/编辑儿童信息弹窗 -->
  <view class="modal" wx:if="{{showModal}}">
    <view class="modal-mask" bindtap="hideModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text>{{editingChild ? '编辑儿童信息' : '添加儿童信息'}}</text>
      </view>
      <view class="modal-body">
        <view class="form-item">
          <text class="label">姓名</text>
          <input type="text" value="{{formData.name}}" bindinput="onNameInput" placeholder="请输入儿童姓名"/>
        </view>
        <view class="form-item">
          <text class="label">性别</text>
          <picker bindchange="onGenderChange" value="{{formData.gender}}" range="{{genderOptions}}">
            <view class="picker">
              {{formData.gender}}
            </view>
          </picker>
        </view>
        <view class="form-item">
          <text class="label">年龄</text>
          <input type="number" value="{{formData.age}}" bindinput="onAgeInput" placeholder="请输入年龄"/>
        </view>
        <view class="form-item">
          <text class="label">身高(cm)</text>
          <input type="digit" value="{{formData.height}}" bindinput="onHeightInput" placeholder="请输入身高"/>
        </view>
        <view class="form-item">
          <text class="label">监护人电话</text>
          <input type="number" value="{{formData.guardianPhone}}" bindinput="onGuardianPhoneInput" placeholder="请输入监护人手机号"/>
        </view>
        <view class="form-item">
          <text class="label">健康备注</text>
          <textarea value="{{formData.healthNote}}" bindinput="onHealthNoteInput" placeholder="请输入健康备注（选填）"/>
        </view>
      </view>
      <view class="modal-footer">
        <button class="cancel-btn" bindtap="hideModal">取消</button>
        <button class="confirm-btn" bindtap="submitForm">确定</button>
      </view>
    </view>
  </view>
</view> 